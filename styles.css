/* =========================================================
   Design tokens (dark by default)
   ========================================================= */
   :root{
    --bg:#0b0c10; --fg:#e8e8ea; --muted:#a8acb3;
    --accent:#5aa9ff; --accent-2:#00e0a4;
    --warn:#ffcc00; --err:#ff6b6b;
  
    --card:#15171c; --card-2:#1b1f26; --border:#2a2f38; --focus:#ffffff;
    --radius:16px; --pad:16px; --pad-sm:12px; --gap:12px; --gap-lg:16px;
    --tap:48px;
    --font: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    --shadow: 0 0 0 1px var(--border) inset, 0 6px 18px rgba(0,0,0,.25);
    --safe-b: env(safe-area-inset-bottom);
  }
  
  /* Light palette */
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --fg:#101114; --muted:#4e5461;
      --accent:#0b78d1; --accent-2:#0bb37b;
      --card:#ffffff; --card-2:#f0f2f6; --border:#e1e4ea; --focus:#000000;
      --shadow: 0 0 0 1px var(--border) inset, 0 8px 22px rgba(0,0,0,.06);
    }
  }
  
  /* =========================================================
     Base
     ========================================================= */
  *{ box-sizing:border-box }
  html,body{ height:100% }
  :root{ font-size:16px }
  @media (min-width:480px){ :root{ font-size:17px } }
  @media (min-width:768px){ :root{ font-size:18px } }
  
  body{
    margin:0;
    background:var(--bg);
    color:var(--fg);
    font-family:var(--font);
    line-height:1.5;
    -webkit-text-size-adjust:100%;
  }
  a{ color:var(--accent) }
  
  .wrap{
    max-width:920px;
    margin:0 auto;
    padding:var(--pad);
    display:grid;
    gap:var(--gap-lg);
  }
  
  /* =========================================================
     A11y utilities
     ========================================================= */
  .sr-only{
    position:absolute !important;
    width:1px; height:1px;
    padding:0; margin:-1px;
    overflow:hidden; clip:rect(0,0,0,0);
    white-space:nowrap; border:0;
  }
  
  .skip{ position:absolute; left:-9999px }
  .skip:focus{
    position:fixed; left:var(--pad); top:var(--pad);
    z-index:9999; background:var(--card);
    border:2px solid var(--focus); border-radius:8px;
    padding:8px 12px;
  }
  
  /* =========================================================
     Layout
     ========================================================= */
  header{
    display:grid;
    grid-template-columns:1fr auto;
    align-items:center;
    gap:12px;
  }
  .brand{ display:flex; align-items:center; gap:12px; min-height:var(--tap) }
  .logo{
    width:30px; height:30px; border-radius:8px;
    background:linear-gradient(135deg,var(--accent),var(--accent-2));
    background-image:url('./favicon-32.png');
  }
  h1{ margin:0; font-size:1.1rem }
  
  .badge-warn{
    padding:4px 10px; border-radius:999px; font-weight:700;
    background:var(--warn); color:#000;
  }
  
  .card{
    background:var(--card);
    border-radius:var(--radius);
    border:1px solid var(--border);
    padding:var(--pad);
    box-shadow:var(--shadow);
  }
  .row{ display:grid; gap:var(--gap) }
  
  /* =========================================================
     Buttons
     ========================================================= */
  .btn{
    border:1px solid var(--border);
    background:var(--card-2);
    padding:12px 14px;
    border-radius:12px;
    cursor:pointer;
    min-height:var(--tap);
    font-weight:600;
  }
  .btn.primary{
    background:var(--accent);
    border-color:var(--accent);
    color:#0b0c10;
  }
  .btn:disabled{ opacity:.6; cursor:not-allowed }
  .btn:focus-visible{ outline:3px solid var(--focus); outline-offset:2px }
  
  /* =========================================================
     Segmented control (tabs)
     ========================================================= */
  .seg{
    display:grid; grid-auto-flow:column; gap:8px;
    background:var(--card-2);
    border:1px solid var(--border);
    padding:6px; border-radius:999px;
  }
  .seg [role="tab"]{
    border-radius:999px;
    background:transparent;
    border:1px solid transparent;
    min-width:96px;
    color:var(--muted);
    padding:10px 14px;
    transition:.2s;
  }
  .seg [aria-selected="true"]{
    background:var(--card);
    color:var(--fg);
    border:2px solid var(--fg);
    box-shadow:0 2px 4px rgba(0,0,0,.25);
  }
  
  /* =========================================================
     Form controls
     ========================================================= */
  input,textarea,select{
    width:100%;
    padding:14px;
    border-radius:12px;
    border:1px solid var(--border);
    background:var(--card-2);
    color:var(--fg);
    margin-bottom:1em;
  }
  
  .input-actions{ display:flex; gap:8px; align-items:center }
  .input-actions input{ flex:1 1 auto; margin-bottom:0 }
  .input-actions .btn{ flex:0 0 auto }
  
  .inline{ display:flex; align-items:center; justify-content:space-between; gap:8px }
  .status{ font-size:.95rem }
  .muted{ color:var(--muted); font-size:.9rem; font-style:italic; opacity:.85 }
  textarea{ min-height:160px }
  
  /* =========================================================
     Progress
     ========================================================= */
  .progress{
    display:none;               /* hidden by default; JS toggles .visible */
    height:12px;
    background:var(--card-2);
    border-radius:999px;
    border:1px solid var(--border);
  }
  .bar{
    height:100%; width:0%;
    background:linear-gradient(90deg,var(--accent),var(--accent-2));
    border-radius:999px;
  }
  
  /* Width steps (optional utility) */
  .bar.p-0   { width: 0% }
  .bar.p-5   { width: 5% }
  .bar.p-10  { width:10% }
  .bar.p-15  { width:15% }
  .bar.p-20  { width:20% }
  .bar.p-25  { width:25% }
  .bar.p-30  { width:30% }
  .bar.p-35  { width:35% }
  .bar.p-40  { width:40% }
  .bar.p-45  { width:45% }
  .bar.p-50  { width:50% }
  .bar.p-55  { width:55% }
  .bar.p-60  { width:60% }
  .bar.p-65  { width:65% }
  .bar.p-70  { width:70% }
  .bar.p-75  { width:75% }
  .bar.p-80  { width:80% }
  .bar.p-85  { width:85% }
  .bar.p-90  { width:90% }
  .bar.p-95  { width:95% }
  .bar.p-100 { width:100% }
  
  /* JS visibility helpers */
  .hidden { display:none !important }
  .visible{ display:block !important }
  
  /* =========================================================
     Dropzones
     ========================================================= */
  .drop{
    padding:20px;
    border:2px dashed var(--border);
    border-radius:12px;
    display:grid; place-items:center;
    gap:6px; min-height:319px;
    text-align:center;
  }
  .drop.drag{ border-color:var(--accent) }
  
  /* Make Encrypt & Decrypt dropzones identical */
  #encDrop, #decDrop{ width:100%; box-sizing:border-box }
  #encDrop > strong, #encDrop > .muted,
  #decDrop > strong, #decDrop > .muted{ margin:0; line-height:1.2 }
  
  /* =========================================================
     Sticky action bar
     ========================================================= */
  .actionbar{ position:sticky; bottom:var(--safe-b); padding-top:6px; background: var(--bg) }

  .actionbar .buttons{
    background:var(--card);
    border:1px solid var(--border);
    padding:8px;
    border-radius:14px;
    box-shadow:var(--shadow);
    display:flex; gap:8px; flex-wrap:wrap;
  }
  /* Consistent button width with room for translations */
  .actionbar .buttons .btn{
    min-width:110px; /* 110–140 is a good range */
    text-align:center;
    justify-content:center;
  }
  
  /* =========================================================
     Footer
     ========================================================= */
  footer{
    margin-bottom:calc(10px + var(--safe-b));
    color:var(--muted);
    font-size:.95rem;
  }
  
  /* =========================================================
     Minor polish
     ========================================================= */
  .drop:focus-visible{ outline:3px solid var(--focus); outline-offset:2px }
  [role="tabpanel"][hidden]{ display:none !important }
  
  @media (max-width:420px){
    .brand h1{ font-size:1rem }
    .seg [role="tab"]{ min-width:84px; padding:8px 10px }
  }
  
  /* =========================================================
     Inline styles migrated to CSS (as utilities)
     ========================================================= */
  .w-max{ width:max-content }
  .mt-8{ margin-top:8px }
  .mt-10{ margin-top:10px }
  .mt-12{ margin-top:12px }
  .pl-18{ padding-left:18px }
  
  #encFileList{ margin:8px 0 0; padding-left:18px }
  #encOutputs{ margin-top:12px; display:none } /* shown via .visible */
  #decFileName{ margin-top:6px }
  #decDetails{ margin-top:8px }
  #decText{
    margin-top:8px; white-space:pre-wrap;
    overflow:auto; max-height:40vh;
  }
  
  /* =========================================================
     Error / status banner
     ========================================================= */
  .banner{
    display:block;
    background:var(--card); color:var(--fg);
    border:1px solid var(--border);
    border-left-width:6px;
    border-radius:12px;
    padding:12px 14px;
    box-shadow:var(--shadow);
    margin:4px 0 8px;
    line-height:1.4;
    position:relative;
  }
  .banner.error{ border-left-color:var(--err) }
  .banner.warn { border-left-color:var(--warn) }
  .banner.ok   { border-left-color:var(--accent-2) }
  
  .banner::before{
    content:"";
    position:absolute; left:12px; top:50%;
    transform:translateY(-50%);
    width:10px; height:10px; border-radius:50%;
    background:currentColor; opacity:.15;
  }
  .banner > *{ margin:0; padding-left:0 }
  .banner p{ margin:0 }
  .banner strong{ font-weight:700 }
  .banner .close{
    position:absolute; right:10px; top:8px;
    border:none; background:transparent;
    color:var(--muted); cursor:pointer;
    padding:6px; border-radius:8px;
  }
  .banner .close:focus-visible{ outline:3px solid var(--focus); outline-offset:2px }
  .banner[hidden]{ display:none !important }
  
  @media (prefers-reduced-motion: no-preference){
    .banner{ animation:slide-down .18s ease-out both }
  }
  @keyframes slide-down{
    from{ transform:translateY(-6px); opacity:0 }
    to  { transform:translateY(0);    opacity:1 }
  }
  
  /* =========================================================
     Trust / privacy note
     ========================================================= */
  .trust-message{
    text-align:center;
    font-size:.9rem;
    color:var(--muted);
    margin:12px auto 0;
    padding-bottom:calc(12px + var(--safe-b));
    max-width:700px; line-height:1.4; opacity:.85;
  }
  @media (prefers-color-scheme: light){
    .trust-message{ color:var(--muted); opacity:.9 }
  }
  
  /* =========================================================
     Password toggle buttons (consistent width)
     ========================================================= */
  #encPwdToggle, #decPwdToggle{
    width:6em; text-align:center;
  }
  
  /* =========================================================
     Fieldset reset / structure
     ========================================================= */
  fieldset{ border:none; padding:0; margin:0 }
  fieldset > legend{
    font-size:1.05rem; font-weight:600;
    color:var(--fg); opacity:.9;
    padding:0 4px; margin-bottom:8px;
  }
  
  /* =========================================================
   Accessibility Layer (A11y)
   - SR-only, focus visibles, erreurs, contrastes,
     préférences utilisateurs, etc.
   ========================================================= */

/* Text for screen readers */
.sr-only,
.visually-hidden{
  position:absolute !important;
  width:1px; height:1px;
  padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0);
  white-space:nowrap; border:0;
}

/* 2) Skip link */
.skip:focus{
  position:fixed; left:var(--pad); top:var(--pad);
  z-index:9999; background:var(--card);
  border:2px solid var(--focus); border-radius:8px;
  padding:8px 12px;
}

/* 3) Focus */
:focus-visible{
  outline:3px solid var(--focus);
  outline-offset:2px;
}
.seg [role="tab"]:focus-visible,
[role="tabpanel"]:focus-visible,
summary:focus-visible,
.drop:focus-visible,
.btn:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible{
  outline:3px solid var(--focus);
  outline-offset:2px;
  border-radius:8px;
}

/* 4) Validation states (aria-invalid) */
input[aria-invalid="true"],
textarea[aria-invalid="true"],
select[aria-invalid="true"]{
  border-color: var(--err);
  box-shadow: 0 0 0 2px color-mix(in oklab, var(--err) 35%, transparent);
}

/* 5) Regions */
[aria-busy="true"]{
  cursor: progress;
}
[aria-busy="true"] .btn.primary{ filter: saturate(.8); opacity:.85 }

/* Progressbars */
.progress .bar{
  transition: width .25s linear;
}
@media (prefers-reduced-motion: reduce){
  .progress .bar{ transition: none }
}

/* Summary focus*/
details > summary{
  list-style: none;
}
details > summary::-webkit-details-marker{ display:none }

/* Keyboard */
.drop{
  position: relative;
}
.drop[aria-disabled="true"]{
  opacity:.6; cursor:not-allowed;
}

/* 9) Windows High Contrast */
@media (forced-colors: active){
  *{ forced-color-adjust: auto }
  .seg [aria-selected="true"]{ border-color: Highlight; }
  .btn:focus-visible,
  .drop:focus-visible,
  [role="tab"]:focus-visible,
  [role="tabpanel"]:focus-visible,
  summary:focus-visible{ outline: 2px solid Highlight; }
}

/* =========================================================
Hashes display
========================================================= */

.hashbox {
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  white-space: pre;    /* préserve les sauts de ligne et l'indentation */
  line-height: 1.4;
  margin: 0;           /* évite les décalages dus aux <p> */
  padding: 1rem 1.25rem;
}


